<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>randomize();
muted = 0;
global.categoria="F";
global.subeCat=8;
global.bajaCat=1;
global.nMalo=0;
global.destruir=false;
global.subEjercicio = 1;
global.malasSeguidas=0;
global.operacion = "M";
global.wave = 1;
global.waveFake = 1;
global.waveUltraFake = 1;
global.origen = "random";
//ESTO PQ NO FUNCIONA LA PARAMETRIZACION

/*
global.minA=2;
global.maxB=9;
*/
//NO TOCAR

global.nEjercicios=global.maxB-global.minA+1;
global.nTests=global.nEjercicios/2;
for(i=0;i&lt;(global.maxB-global.minA+1);i++){
    global.numero[i]=global.minA+i;
}
//SETS
/*
global.sets = 5;
//PORCENTAJES
global.eFacil[0]=5;
global.eMedio[0]=2;
global.eDificil[0]=1;

global.eFacil[1]=3;
global.eMedio[1]=4;
global.eDificil[1]=1;

global.eFacil[2]=2;
global.eMedio[2]=3;
global.eDificil[2]=3;

global.eFacil[3]=2;
global.eMedio[3]=2;
global.eDificil[3]=4;

global.eFacil[4]=1;
global.eMedio[4]=2;
global.eDificil[4]=5;
*/
//PARA LAS SIGUIENTES SE MANTIENE LA ULTIMA

var dist = 1;
for(i=global.sets;i&lt;100;i++){
    global.eFacil[i]=global.eFacil[i-dist];
    global.eMedio[i]=global.eMedio[i-dist];
    global.eDificil[i]=global.eDificil[i-dist];
    dist++;
}

global.sets = 100;
global.sp1 = global.min_vel+0.1;
global.sp2 = global.min_vel;
global.sp3 = global.min_vel-0.1;
global.ws = 0; //creo q se puede quitar
global.alternativa=choose(floor(random_range(1,3)));
global.correctas=0;
global.incorrectas=0;
global.idUser="";
global.puntaje=0; //SCORE
global.numM=0; //ALTERNATIVA
global.cont=0;
global.ccont=0;
global.alarma = 0;
global.bot = 0;
global.bot2 =0;
global.alturas=choose(floor(random_range(0,4)));
global.ejercicio = 0;
global.nrondas=0; //RONDAS SEGUIDAS
global.nrondasc=0
global.contadorcito = 2;

global.dificultad = -1;
if(!global.ronda0) global.dificultad = 0;
//DIFICULTAD POR SET DE RONDAS


global.numeros = undefined;
//OCURRENCIAS MALAS
for(i=global.minA;i&lt;=global.maxB;i++){
    global.oBuenas[i]=0;
}
global.iF = 0;
global.iM = 0;
global.iD = 0;


global.estado = "omitida";
global.intentos = 0;
global.numEjercicio = 1;
global.respondida = 0;
global.segundos = 0;
global.aparicionCorrecta = 0;
global.tiempoUltimaRespuesta = 0;

global.arrAltura[0] = 246;
global.arrAltura[1] = 318;
global.arrAltura[2] = 390;

global.bigMap = ds_map_create();
global.intentosRonda = ds_map_create();
global.dificultadesMap = ds_map_create();

if(global.ronda0){
    global.faciles = undefined;
    global.medios = undefined;
    global.dificiles = undefined;
}
global.spawner_enabled = true;
global.ejercicioTerminado = false;
global.num1_displayed = 0;
global.num2_displayed = 0;
global.den1_displayed = 0;
global.den2_displayed = 0;
global.butterfly = false;

meteoros = 3;
spawn_rate = 50; // original es 50;
wave_generator_timer = 2;
ultimoEjercicio = undefined;
global.suma_correcta = undefined;
alarm[0] = spawn_rate;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>randomize();
//crear asteroide
/*if(global.cont&lt;meteoros){
global.cont++;
nuevay = global.cont-1;
if(global.cont!=global.alternativa){
    instance_create(room_width + 40, global.arrAltura[nuevay,global.alturas], obj_asteroid);

}else{
    global.bot=1;
    nuevay = global.cont-1;
    instance_create(room_width + 40, global.arrAltura[nuevay,global.alturas], obj_asteroid);
    global.bot=0;
}
draw_set_color(c_white);
draw_set_font(fntMain);

}
*/
//AQUÍ SE CUMPLE UNA OLEADA

if(global.spawner_enabled){
    global.ejercicioTerminado = false;
    global.alternativa=irandom_range(0,2);
    for(i = 0; i&lt;3; i++){
        if(i == global.alternativa){
            global.bot = 1;
        }
        instance_create(room_width + 40, global.arrAltura[i], obj_asteroid);
        global.bot = 0;
    }
    global.spawner_enabled = false;
    
    if(global.dificultad &gt;= 0){
        global.butterfly = true;
        global.num1_displayed = global.num1;
        global.num2_displayed = global.num2;
        global.den1_displayed = global.den1;
        global.den2_displayed = global.den2;
    }
}

/*
if(global.ccont == meteoros){ //contador de meteoritos destruidos o q salen de pantalla
        show_debug_message("Número ejercicio:")
        show_debug_message(global.numEjercicio);
        show_debug_message("multiplo A:")
        show_debug_message(global.a)
        show_debug_message("multiplo B:")
        show_debug_message(global.b)
        show_debug_message("Respuesta:")
        show_debug_message(global.r)
        show_debug_message("Intentos:")
        show_debug_message(global.intentos);
        show_debug_message("Tiempo ultima ronda:")
        show_debug_message(global.tiempoUltimaRespuesta);
        show_debug_message("Estado de la respuesta:")
        show_debug_message(global.estado);
        
        roundMap = ds_map_create();
        ds_map_add(roundMap, "multiplo_a", global.a);
        ds_map_add(roundMap, "multiplo_b", global.b);
        ds_map_add(roundMap, "respuesta_correcta", global.r);
        ds_map_add(roundMap, "total_intentos", global.intentos);
        ds_map_add(roundMap, "ultima_respuesta", global.numM);
        ds_map_add(roundMap, "tiempo_respuesta", global.tiempoUltimaRespuesta);
        ds_map_add(roundMap, "estado_respuesta",global.estado);
        ds_map_add(roundMap, "etapa",(global.dificultad+1));
        ds_map_add(roundMap, "origen",global.origen);
        ds_map_add(roundMap, "operacion",global.operacion);
        //OONDICIÓN SI ES QUE NO SE LE DISPARÓ A NINGÚN METEROTIO (NO HUBO INTENTO)
        
        var copiaIntentosRonda = ds_map_create();
        ds_map_copy(copiaIntentosRonda, global.intentosRonda);
        ds_map_add_map(roundMap, "intentos", copiaIntentosRonda);
        
        
        var copiaRonda = ds_map_create();
        ds_map_copy(copiaRonda, roundMap);
        ds_map_add_map(global.bigMap, global.numEjercicio, copiaRonda);
        
        var in = json_encode(global.intentosRonda);
        show_debug_message(in);
        var cin = json_encode(copiaIntentosRonda);
        show_debug_message(cin);
        var ro = json_encode(roundMap);
        show_debug_message(ro);
        var cro = json_encode(copiaRonda);
        show_debug_message(cro);
        
        ds_map_clear(global.intentosRonda);
        //ds_map_clear(roundMap);
        
        
        
        show_debug_message("***************************************");
        
        if(global.bot2==0){
            obj_ship.hp-=1;
            show_debug_message("no hizo nada");
            if(obj_ship.hp == 0){
             show_debug_message("MURIÓ POR OMITIR, CORRER SCRIPT");
             guardar(true); // SE EXPORTA A JSON Y SE ENVIA A PHP PARA STORE
             exit; 
            }
        }else global.bot2=0;
        global.alternativa=choose(floor(random_range(1,5)));
        global.alturas=choose(floor(random_range(0,4)));
        //meteoros ++;
        
        global.wave ++;
        global.subEjercicio++;
        global.waveFake++;
        global.waveUltraFake++;
        if(global.waveFake==global.nTests+1){
            global.waveFake=1;
        }
        if(global.subEjercicio==5) global.subEjercicio=1;
        
        if(global.wave==global.nEjercicios+1){
            global.existeF=0;
            global.existeM=0;
            global.existeD=0;
            for(i=global.minA;i&lt;=global.maxB;i++){
                
                if(global.oBuenas[i]==2){
                    global.faciles[global.iF]=i;
                    global.iF++;
                    global.existeF=1;
                }
                if(global.oBuenas[i]==1){
                    global.medios[global.iM]=i;
                    global.iM++;
                    global.existeM=1;
                }
                if(global.oBuenas[i]==0){
                    global.dificiles[global.iD]=i;
                    global.iD++;
                    global.existeD=1;
                }
                
            }
            
            
            if(global.existeF!=0 &amp;&amp; global.existeM==0 &amp;&amp; global.existeD==0){
                for(i=0;i&lt;global.sets;i++){
                    global.eFacil[i]=8;
                    global.eMedio[i]=0;
                    global.eDificil[i]=0;
                }
            }
            if(global.existeF==0 &amp;&amp; global.existeM!=0 &amp;&amp; global.existeD==0){
                for(i=0;i&lt;global.sets;i++){
                    global.eFacil[i]=0;
                    global.eMedio[i]=8;
                    global.eDificil[i]=0;
                }
            }
            if(global.existeF!=0 &amp;&amp; global.existeM!=0 &amp;&amp; global.existeD==0){
                for(i=0;i&lt;global.sets;i++){
                    var flag = global.eDificil[i];
                    global.eDificil[i]=0;
                    global.eMedio[i]=global.eMedio[i]+flag;
                }
            }
            if(global.existeF==0 &amp;&amp; global.existeM!=0 &amp;&amp; global.existeD!=0){
                for(i=0;i&lt;global.sets;i++){
                    var flag = global.eFacil[i];
                    global.eFacil[i]=0;
                    global.eMedio[i]=global.eMedio[i]+flag;
                }
            }
            if(global.existeF!=0 &amp;&amp; global.existeM==0 &amp;&amp; global.existeD!=0){
                for(i=0;i&lt;global.sets;i++){
                    var flag = global.eMedio[i];
                    global.eMedio[i]=0;
                    global.eDificil[i]=global.eDificil[i]+flag;
                }
            }
        }
        if(global.waveUltraFake==global.nEjercicios+1){
            global.waveUltraFake=1;
            global.dificultad++;
            if(global.existeF==1){
                show_debug_message("FACILES: ");
                show_debug_message(global.faciles);
                var size = array_length_1d(global.faciles);
                var i,j,k;
                for(i=0;i&lt;size;i++){
                    j=irandom_range(i,size-1);
                    if(i!=j){
                        k=global.faciles[i];
                        global.faciles[i]=global.faciles[j];
                        global.faciles[j]=k;
                        
                    }
                }
                show_debug_message("FACILES DESORDENADAS: ");
                show_debug_message(global.faciles);
            }
            if(global.existeM==1){
                show_debug_message("MEDIOS: ");
                show_debug_message(global.medios);
                var size = array_length_1d(global.medios);
                var i,j,k;
                for(i=0;i&lt;size;i++){
                    j=irandom_range(i,size-1);
                    if(i!=j){
                        k=global.medios[i];
                        global.medios[i]=global.medios[j];
                        global.medios[j]=k;
                        
                    }
                }
                show_debug_message("MEDIOS DESORDENADAS: ");
                show_debug_message(global.medios);
            }
            if(global.existeD==1){
                show_debug_message("DIFICILES: ");
                show_debug_message(global.dificiles);
                var size = array_length_1d(global.dificiles);
                var i,j,k;
                for(i=0;i&lt;size;i++){
                    j=irandom_range(i,size-1);
                    if(i!=j){
                        k=global.dificiles[i];
                        global.dificiles[i]=global.dificiles[j];
                        global.dificiles[j]=k;
                        
                    }
                }
                show_debug_message("DIFICILES DESORDENADAS: ");
                show_debug_message(global.dificiles);
            }
        }
        show_debug_message("Ronda");
        show_debug_message(global.dificultad+1);
        if(global.dificultad&gt;=0){show_debug_message("EJERCICIOS FACILES POR SALIR: ");show_debug_message(global.eFacil[global.dificultad]);}
        if(global.dificultad&gt;=0){show_debug_message("EJERCICIOS MEDIOS POR SALIR: ");show_debug_message(global.eMedio[global.dificultad]);}
        if(global.dificultad&gt;=0){show_debug_message("EJERCICIOS DIFICLES POR SALIR: ");show_debug_message(global.eDificil[global.dificultad]);}

        show_debug_message("Ejercicio");
        show_debug_message(global.waveUltraFake);
        
        if(global.modo==0) {
            if(global.subEjercicio==1){
                global.num1=choose(floor(random_range(global.minA,global.maxB)));
                global.num2=choose(floor(random_range(global.minA,global.maxB)));
                global.den1=choose(floor(random_range(global.minA,global.maxB)));
                global.den2=choose(floor(random_range(global.minA,global.maxB)));
                global.a = global.num1;
                global.b = global.den2;
                global.r = global.a*global.b;
                global.ar = global.a*global.b;
            }
            if(global.subEjercicio==2){
                global.a = global.num2;
                global.b = global.den1;
                global.r = global.a*global.b;
                global.br = global.a*global.b;
            }
            if(global.subEjercicio==3){
                global.a = global.den1;
                global.b = global.den2;
                global.r = global.a*global.b;
            }
            if(global.subEjercicio==4){
                global.a = global.ar;
                global.b = global.br;
                global.r = global.a+global.b;
            }
        }
        if(global.modo==1) {
            global.a = choose(floor(random_range(1,20)));
            global.b = choose(floor(random_range(1,global.a)));
            global.r = global.a-global.b;
        }
        if(global.modo==2) {
            randomize();
            if(global.dificultad&lt;0){
                if(global.waveFake==1){
                    for(i=0;i&lt;array_length_1d(global.numeros);i++){
                        global.numeros[i]=0;
                    }
                    global.a = choose(floor(random_range(global.minA,global.maxB)));
                    global.numeros[0]=global.a;
                    var aux=0;
                    var ii=0;
                    var arrayFake;
                    for(i=0;i&lt;array_length_1d(global.numero);i++){
                        aux=0;
                        for(j=0;j&lt;array_length_1d(global.numeros);j++){
                            if(global.numero[i]==global.numeros[j]){
                                aux=1;
                                break;
                            }
                        }
                        if(aux==0){
                            arrayFake[ii]=global.numero[i];
                            ii++;
                        }
                    }
                    var largo = array_length_1d(arrayFake)-1;
                    var indice = choose(floor(random_range(0,largo)));
                    global.b = arrayFake[indice];
                    global.numeros[1]=global.b;
                    global.r = global.a*global.b;
                }
                if(global.waveFake&gt;1){
                    var aux=0;
                    var ii=0;
                    var arrayFake;
                    for(i=0;i&lt;array_length_1d(global.numero);i++){
                        aux=0;
                        for(j=0;j&lt;array_length_1d(global.numeros);j++){
                            if(global.numero[i]==global.numeros[j]){
                                aux=1;
                                break;
                            }
                        }
                        if(aux==0){
                            arrayFake[ii]=global.numero[i];
                            ii++;
                        }
                    }
                    var largo = array_length_1d(arrayFake)-1;
                    var indice = choose(floor(random_range(0,largo)));
                    global.a = arrayFake[indice];
                    global.numeros[global.contadorcito]=global.a;
                    global.contadorcito++;
                    
                    var aux=0;
                    var ii=0;
                    var arrayFake;
                    for(i=0;i&lt;array_length_1d(global.numero);i++){
                        aux=0;
                        for(j=0;j&lt;array_length_1d(global.numeros);j++){
                            if(global.numero[i]==global.numeros[j]){
                                aux=1;
                                break;
                            }
                        }
                        if(aux==0){
                            arrayFake[ii]=global.numero[i];
                            ii++;
                        }
                    }
                    var largo = array_length_1d(arrayFake)-1;
                    var indice = choose(floor(random_range(0,largo)));
                    global.b = arrayFake[indice];
                    global.numeros[global.contadorcito]=global.b;
                    global.contadorcito++;
                    global.r = global.a*global.b;
                }
            }
            if(global.dificultad&gt;=0){
            
                if(global.waveUltraFake==1){
                    for(i=0;i&lt;array_length_1d(global.numeros);i++){
                        global.numeros[i]=0;
                    }
                    global.b = choose(floor(random_range(global.minA,global.maxB)));
                    global.numeros[0]=global.b;
                    global.contadorcito = 1;
                }
                if(global.waveUltraFake&gt;1){
                    var aux=0;
                    var ii=0;
                    var arrayFake;
                    for(i=0;i&lt;array_length_1d(global.numero);i++){
                        aux=0;
                        for(j=0;j&lt;array_length_1d(global.numeros);j++){
                            if(global.numero[i]==global.numeros[j]){
                                aux=1;
                                break;
                            }
                        }
                        if(aux==0){
                            arrayFake[ii]=global.numero[i];
                            ii++;
                        }
                    }
                    var largo = array_length_1d(arrayFake)-1;
                    var indice = choose(floor(random_range(0,largo)));
                    global.b = arrayFake[indice];
                    global.numeros[global.contadorcito]=global.b;
                    global.contadorcito++;
                    
                }
                if(global.eFacil[global.dificultad]&gt;0){
                    global.origen = "facil";
                    global.a=global.faciles[0];
                    var numa=global.faciles[0];
                    for(x= 0; x&lt;array_length_1d(global.faciles)-1; x++){
                        global.faciles[x] = global.faciles[x+1];
                    }
                    global.faciles[array_length_1d(global.faciles)-1]= numa; 
                    global.eFacil[global.dificultad]--;
                }
                else{
                    if(global.eMedio[global.dificultad]&gt;0){
                        global.origen = "medio";
                        global.a=global.medios[0];
                        var numa=global.medios[0];
                        for(x= 0; x&lt;array_length_1d(global.medios)-1; x++){
                            global.medios[x] = global.medios[x+1];
                        }
                        global.medios[array_length_1d(global.medios)-1]= numa; 
                        global.eMedio[global.dificultad]--;
                    }
                    else{
                        if(global.eDificil[global.dificultad]&gt;0){
                            global.origen = "dificil";
                            global.a=global.dificiles[0];
                            var numa=global.dificiles[0];
                            for(x= 0; x&lt;array_length_1d(global.dificiles)-1; x++){
                                global.dificiles[x] = global.dificiles[x+1];
                            }
                            global.dificiles[array_length_1d(global.dificiles)-1]= numa; 
                            global.eDificil[global.dificultad]--;
                        }
                    }
                }
                global.r=global.a*global.b;
                
            
            }
        }
        if(global.modo==3) {
            global.a = choose(floor(random_range(2,12)));
            global.b = choose(floor(random_range(2,global.a)));
            global.r = global.a/global.b;
        }
        global.cont = 0;
        global.ccont=0;
        
        
        alarm[0] = room_speed*1;
        global.intentos = 0; /*CUANDO YA PASARON TODOS LOS ASTEROIDES (RONDA TERMINADA
                                EL CONTADOR DE INTENTOS SE RESETEA
        global.numEjercicio++;
        global.respondida = false;
        global.tiempoUltimaRespuesta = 0;
        global.aparicionCorrecta = 0;
        global.segundos = 0;
        global.estado = "omitida";
}else{
*/
//nueva llamada 

alarm[0] = spawn_rate; // original es spawn_rate 


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.segundos += 1/room_speed;

if(global.ccont == meteoros){ //contador de meteoritos destruidos o q salen de pantalla
        if(global.estado != "correcta" &amp;&amp; !global.dead) 
            instance_create(0,0,obj_textbox_correccion);
        global.destruir=false;
        global.nMalo=0;
        show_debug_message("Número ejercicio:")
        show_debug_message(global.numEjercicio);
        show_debug_message("multiplo A:")
        show_debug_message(global.a)
        show_debug_message("multiplo B:")
        show_debug_message(global.b)
        show_debug_message("Respuesta:")
        show_debug_message(global.r)
        show_debug_message("Intentos:")
        show_debug_message(global.intentos);
        show_debug_message("Tiempo ultima ronda:")
        show_debug_message(global.tiempoUltimaRespuesta);
        show_debug_message("Estado de la respuesta:")
        show_debug_message(global.estado);
        
        roundMap = ds_map_create();
        ds_map_add(roundMap, "multiplo_a", global.a);
        ds_map_add(roundMap, "multiplo_b", global.b);
        ds_map_add(roundMap, "respuesta_correcta", global.r);
        ds_map_add(roundMap, "total_intentos", global.intentos);
        ds_map_add(roundMap, "ultima_respuesta", global.numM);
        ds_map_add(roundMap, "tiempo_respuesta", global.tiempoUltimaRespuesta);
        ds_map_add(roundMap, "estado_respuesta",global.estado);
        ds_map_add(roundMap, "etapa",(global.dificultad+1));
        ds_map_add(roundMap, "origen",global.origen);
        ds_map_add(roundMap, "operacion",global.operacion);
        //OONDICIÓN SI ES QUE NO SE LE DISPARÓ A NINGÚN METEROTIO (NO HUBO INTENTO)
        
        var copiaIntentosRonda = ds_map_create();
        ds_map_copy(copiaIntentosRonda, global.intentosRonda);
        ds_map_add_map(roundMap, "intentos", copiaIntentosRonda);
        
        
        var copiaRonda = ds_map_create();
        ds_map_copy(copiaRonda, roundMap);
        ds_map_add_map(global.bigMap, global.numEjercicio, copiaRonda);
        
        var in = json_encode(global.intentosRonda);
        show_debug_message(in);
        var cin = json_encode(copiaIntentosRonda);
        show_debug_message(cin);
        var ro = json_encode(roundMap);
        show_debug_message(ro);
        var cro = json_encode(copiaRonda);
        show_debug_message(cro);
        
        ds_map_clear(global.intentosRonda);
        //ds_map_clear(roundMap);
        
        
        
        show_debug_message("***************************************");
        
        if(global.bot2==0){
            obj_ship.hp-=1;
            show_debug_message("no hizo nada");
            if(obj_ship.hp == 0){
             show_debug_message("MURIÓ POR OMITIR, CORRER SCRIPT");
             guardar(true); // SE EXPORTA A JSON Y SE ENVIA A PHP PARA STORE
             exit; 
            }
        }else global.bot2=0;
        global.alternativa=choose(floor(irandom_range(1,3)));
        global.alturas=choose(floor(irandom_range(0,2)));
        //meteoros ++;
        
        global.wave ++;
        global.waveFake++;
        global.waveUltraFake++;
        ultimoEjercicio = global.subEjercicio;
        global.subEjercicio++;
        reverse_scale_setter();
        if(global.subEjercicio==5){
            global.subEjercicio=1;
            show_debug_message("Ejercicio terminado");
            global.ejercicioTerminado = true;
        }
        if(global.waveFake==global.nTests+1){
            global.waveFake=1;
        }
        
        if(global.wave==global.nEjercicios+1){
            global.existeF=0;
            global.existeM=0;
            global.existeD=0;
            global.ronda0=false;
            for(i=global.minA;i&lt;=global.maxB;i++){
                
                if(global.oBuenas[i]==2){
                    global.faciles[global.iF]=i;
                    global.iF++;
                    global.existeF=1;
                }
                if(global.oBuenas[i]==1){
                    global.medios[global.iM]=i;
                    global.iM++;
                    global.existeM=1;
                }
                if(global.oBuenas[i]==0){
                    global.dificiles[global.iD]=i;
                    global.iD++;
                    global.existeD=1;
                }
                
            }
            
            
            if(global.existeF!=0 &amp;&amp; global.existeM==0 &amp;&amp; global.existeD==0){
                for(i=0;i&lt;global.sets;i++){
                    global.eFacil[i]=8;
                    global.eMedio[i]=0;
                    global.eDificil[i]=0;
                }
            }
            if(global.existeF==0 &amp;&amp; global.existeM!=0 &amp;&amp; global.existeD==0){
                for(i=0;i&lt;global.sets;i++){
                    global.eFacil[i]=0;
                    global.eMedio[i]=8;
                    global.eDificil[i]=0;
                }
            }
            if(global.existeF!=0 &amp;&amp; global.existeM!=0 &amp;&amp; global.existeD==0){
                for(i=0;i&lt;global.sets;i++){
                    var flag = global.eDificil[i];
                    global.eDificil[i]=0;
                    global.eMedio[i]=global.eMedio[i]+flag;
                }
            }
            if(global.existeF==0 &amp;&amp; global.existeM!=0 &amp;&amp; global.existeD!=0){
                for(i=0;i&lt;global.sets;i++){
                    var flag = global.eFacil[i];
                    global.eFacil[i]=0;
                    global.eMedio[i]=global.eMedio[i]+flag;
                }
            }
            if(global.existeF!=0 &amp;&amp; global.existeM==0 &amp;&amp; global.existeD!=0){
                for(i=0;i&lt;global.sets;i++){
                    var flag = global.eMedio[i];
                    global.eMedio[i]=0;
                    global.eDificil[i]=global.eDificil[i]+flag;
                }
            }
        }
        if(global.waveUltraFake==global.nEjercicios+1){
            global.waveUltraFake=1;
            global.dificultad++;
            if(global.dificultad==0){
                global.nrondasc=0;
                global.malasSeguidas=0;
            }
            if(global.existeF==1){
                show_debug_message("FACILES: ");
                show_debug_message(global.faciles);
                var size = array_length_1d(global.faciles);
                var i,j,k;
                for(i=0;i&lt;size;i++){
                    j=irandom_range(i,size-1);
                    if(i!=j){
                        k=global.faciles[i];
                        global.faciles[i]=global.faciles[j];
                        global.faciles[j]=k;
                        
                    }
                }
                show_debug_message("FACILES DESORDENADAS: ");
                show_debug_message(global.faciles);
            }
            if(global.existeM==1){
                show_debug_message("MEDIOS: ");
                show_debug_message(global.medios);
                var size = array_length_1d(global.medios);
                var i,j,k;
                for(i=0;i&lt;size;i++){
                    j=irandom_range(i,size-1);
                    if(i!=j){
                        k=global.medios[i];
                        global.medios[i]=global.medios[j];
                        global.medios[j]=k;
                        
                    }
                }
                show_debug_message("MEDIOS DESORDENADAS: ");
                show_debug_message(global.medios);
            }
            if(global.existeD==1){
                show_debug_message("DIFICILES: ");
                show_debug_message(global.dificiles);
                var size = array_length_1d(global.dificiles);
                var i,j,k;
                for(i=0;i&lt;size;i++){
                    j=irandom_range(i,size-1);
                    if(i!=j){
                        k=global.dificiles[i];
                        global.dificiles[i]=global.dificiles[j];
                        global.dificiles[j]=k;
                        
                    }
                }
                show_debug_message("DIFICILES DESORDENADAS: ");
                show_debug_message(global.dificiles);
            }
        }
        show_debug_message("Ronda");
        show_debug_message(global.dificultad+1);
        /*if(global.dificultad&gt;=0){show_debug_message("EJERCICIOS FACILES POR SALIR: ");show_debug_message(global.eFacil[global.dificultad]);}
        if(global.dificultad&gt;=0){show_debug_message("EJERCICIOS MEDIOS POR SALIR: ");show_debug_message(global.eMedio[global.dificultad]);}
        if(global.dificultad&gt;=0){show_debug_message("EJERCICIOS DIFICLES POR SALIR: ");show_debug_message(global.eDificil[global.dificultad]);}*/

        show_debug_message("Ejercicio");
        show_debug_message(global.waveUltraFake);
        
        if(global.modo==0) {
            if(global.dificultad&lt;0){
                if(global.waveFake==1){
                    for(i=0;i&lt;array_length_1d(global.numeros);i++){
                        global.numeros[i]=0;
                    }
                    global.a = choose(floor(random_range(global.minA,global.maxB)));
                    global.numeros[0]=global.a;
                    var aux=0;
                    var ii=0;
                    var arrayFake;
                    for(i=0;i&lt;array_length_1d(global.numero);i++){
                        aux=0;
                        for(j=0;j&lt;array_length_1d(global.numeros);j++){
                            if(global.numero[i]==global.numeros[j]){
                                aux=1;
                                break;
                            }
                        }
                        if(aux==0){
                            arrayFake[ii]=global.numero[i];
                            ii++;
                        }
                    }
                    var largo = array_length_1d(arrayFake)-1;
                    var indice = choose(floor(random_range(0,largo)));
                    global.b = arrayFake[indice];
                    global.numeros[1]=global.b;
                    global.r = global.a*global.b;
                }
                if(global.waveFake&gt;1){
                    var aux=0;
                    var ii=0;
                    var arrayFake;
                    for(i=0;i&lt;array_length_1d(global.numero);i++){
                        aux=0;
                        for(j=0;j&lt;array_length_1d(global.numeros);j++){
                            if(global.numero[i]==global.numeros[j]){
                                aux=1;
                                break;
                            }
                        }
                        if(aux==0){
                            arrayFake[ii]=global.numero[i];
                            ii++;
                        }
                    }
                    var largo = array_length_1d(arrayFake)-1;
                    var indice = choose(floor(random_range(0,largo)));
                    global.a = arrayFake[indice];
                    global.numeros[global.contadorcito]=global.a;
                    global.contadorcito++;
                    
                    var aux=0;
                    var ii=0;
                    var arrayFake;
                    for(i=0;i&lt;array_length_1d(global.numero);i++){
                        aux=0;
                        for(j=0;j&lt;array_length_1d(global.numeros);j++){
                            if(global.numero[i]==global.numeros[j]){
                                aux=1;
                                break;
                            }
                        }
                        if(aux==0){
                            arrayFake[ii]=global.numero[i];
                            ii++;
                        }
                    }
                    var largo = array_length_1d(arrayFake)-1;
                    var indice = choose(floor(random_range(0,largo)));
                    global.b = arrayFake[indice];
                    global.numeros[global.contadorcito]=global.b;
                    global.contadorcito++;
                    global.r = global.a*global.b;
                }
            }
            else{
                if(global.subEjercicio==1){   
                    if(global.categoria=="F"){
                        if(global.existeF==1){
                            global.origen = "facil";
                            global.den1=global.faciles[0];
                            var numa=global.faciles[0];
                            for(x= 0; x&lt;array_length_1d(global.faciles)-1; x++){
                                global.faciles[x] = global.faciles[x+1];
                            }
                            global.den2=global.faciles[0];
                            var numa=global.faciles[0];
                            for(x= 0; x&lt;array_length_1d(global.faciles)-1; x++){
                                global.faciles[x] = global.faciles[x+1];
                            }
                            global.faciles[array_length_1d(global.faciles)-1]= numa; 
                        }
                        else{
                            if(global.existeM==1){
                                global.origen = "medio";
                                global.den1=global.medios[0];
                                var numa=global.medios[0];
                                for(x= 0; x&lt;array_length_1d(global.medios)-1; x++){
                                    global.medios[x] = global.medios[x+1];
                                }
                                global.den2=global.medios[0];
                                var numa=global.medios[0];
                                for(x= 0; x&lt;array_length_1d(global.medios)-1; x++){
                                    global.medios[x] = global.medios[x+1];
                                }
                                global.medios[array_length_1d(global.medios)-1]= numa; 
                            }
                            else{
                                if(global.existeD==1){
                                    global.origen = "dificil";
                                    global.den1=global.dificiles[0];
                                    var numa=global.dificiles[0];
                                    for(x= 0; x&lt;array_length_1d(global.dificiles)-1; x++){
                                        global.dificiles[x] = global.dificiles[x+1];
                                    }
                                    global.den2=global.dificiles[0];
                                    var numa=global.dificiles[0];
                                    for(x= 0; x&lt;array_length_1d(global.dificiles)-1; x++){
                                        global.dificiles[x] = global.dificiles[x+1];
                                    }
                                    global.dificiles[array_length_1d(global.dificiles)-1]= numa; 
                                }
                            }
                        }
                    }
                    if(global.categoria=="M"){
                        if(global.existeM==1){
                            global.origen = "medio";
                            global.den1=global.medios[0];
                            var numa=global.medios[0];
                            for(x= 0; x&lt;array_length_1d(global.medios)-1; x++){
                                global.medios[x] = global.medios[x+1];
                            }
                            global.den2=global.medios[0];
                            var numa=global.medios[0];
                            for(x= 0; x&lt;array_length_1d(global.medios)-1; x++){
                                global.medios[x] = global.medios[x+1];
                            }
                            global.medios[array_length_1d(global.medios)-1]= numa; 
                        }
                        else{
                            if(global.existeD==1){
                                global.origen = "dificil";
                                global.den1=global.dificiles[0];
                                var numa=global.dificiles[0];
                                for(x= 0; x&lt;array_length_1d(global.dificiles)-1; x++){
                                    global.dificiles[x] = global.dificiles[x+1];
                                }
                                global.den2=global.dificiles[0];
                                var numa=global.dificiles[0];
                                for(x= 0; x&lt;array_length_1d(global.dificiles)-1; x++){
                                    global.dificiles[x] = global.dificiles[x+1];
                                }
                                global.dificiles[array_length_1d(global.dificiles)-1]= numa;
                            }
                            else{
                                if(global.existeF==1){
                                    global.origen = "facil";
                                    global.den1=global.faciles[0];
                                    var numa=global.faciles[0];
                                    for(x= 0; x&lt;array_length_1d(global.faciles)-1; x++){
                                        global.faciles[x] = global.faciles[x+1];
                                    }
                                    global.den2=global.faciles[0];
                                    var numa=global.faciles[0];
                                    for(x= 0; x&lt;array_length_1d(global.faciles)-1; x++){
                                        global.faciles[x] = global.faciles[x+1];
                                    }
                                    global.faciles[array_length_1d(global.faciles)-1]= numa;
                                }
                            }
                        }
                    }
                    if(global.categoria=="D"){
                        if(global.existeD==1){
                            global.origen = "dificil";
                            global.den1=global.dificiles[0];
                            var numa=global.dificiles[0];
                            for(x= 0; x&lt;array_length_1d(global.dificiles)-1; x++){
                                global.dificiles[x] = global.dificiles[x+1];
                            }
                            global.den2=global.dificiles[0];
                            var numa=global.dificiles[0];
                            for(x= 0; x&lt;array_length_1d(global.dificiles)-1; x++){
                                global.dificiles[x] = global.dificiles[x+1];
                            }
                            global.dificiles[array_length_1d(global.dificiles)-1]= numa;
                        }
                        else{
                            if(global.existeM==1){
                                global.origen = "medio";
                                global.den1=global.medios[0];
                                var numa=global.medios[0];
                                for(x= 0; x&lt;array_length_1d(global.medios)-1; x++){
                                    global.medios[x] = global.medios[x+1];
                                }
                                global.den2=global.medios[0];
                                var numa=global.medios[0];
                                for(x= 0; x&lt;array_length_1d(global.medios)-1; x++){
                                    global.medios[x] = global.medios[x+1];
                                }
                                global.medios[array_length_1d(global.medios)-1]= numa; 
                            }
                            else{
                                if(global.existeF==1){
                                    global.origen = "facil";
                                    global.den1=global.faciles[0];
                                    var numa=global.faciles[0];
                                    for(x= 0; x&lt;array_length_1d(global.faciles)-1; x++){
                                        global.faciles[x] = global.faciles[x+1];
                                    }
                                    global.den2=global.faciles[0];
                                    var numa=global.faciles[0];
                                    for(x= 0; x&lt;array_length_1d(global.faciles)-1; x++){
                                        global.faciles[x] = global.faciles[x+1];
                                    }
                                    global.faciles[array_length_1d(global.faciles)-1]= numa;
                                }
                            }
                        }
                    }
                    global.num1=choose(floor(random_range(global.minA,global.maxB)));
                    global.num2=choose(floor(random_range(global.minA,global.maxB)));
                    global.a = global.num1;
                    global.b = global.den2;
                    global.r = global.a*global.b;
                    global.ar = global.a*global.b;
                }
                if(global.subEjercicio==2){
                    global.a = global.num2;
                    global.b = global.den1;
                    global.r = global.a*global.b;
                    global.br = global.a*global.b;
                }
                if(global.subEjercicio==3){
                    global.a = global.den1;
                    global.b = global.den2;
                    global.r = global.a*global.b;
                }
                if(global.subEjercicio==4){
                    global.a = global.ar;
                    global.b = global.br;
                    global.r = global.a+global.b;
                }
            }
        }
        if(global.modo==1) {
            global.a = choose(floor(random_range(1,20)));
            global.b = choose(floor(random_range(1,global.a)));
            global.r = global.a-global.b;
        }
        if(global.modo==2) {
            randomize();
            if(global.dificultad&lt;0){
                if(global.waveFake==1){
                    for(i=0;i&lt;array_length_1d(global.numeros);i++){
                        global.numeros[i]=0;
                    }
                    global.a = choose(floor(random_range(global.minA,global.maxB)));
                    global.numeros[0]=global.a;
                    var aux=0;
                    var ii=0;
                    var arrayFake;
                    for(i=0;i&lt;array_length_1d(global.numero);i++){
                        aux=0;
                        for(j=0;j&lt;array_length_1d(global.numeros);j++){
                            if(global.numero[i]==global.numeros[j]){
                                aux=1;
                                break;
                            }
                        }
                        if(aux==0){
                            arrayFake[ii]=global.numero[i];
                            ii++;
                        }
                    }
                    var largo = array_length_1d(arrayFake)-1;
                    var indice = choose(floor(random_range(0,largo)));
                    global.b = arrayFake[indice];
                    global.numeros[1]=global.b;
                    global.r = global.a*global.b;
                }
                if(global.waveFake&gt;1){
                    var aux=0;
                    var ii=0;
                    var arrayFake;
                    for(i=0;i&lt;array_length_1d(global.numero);i++){
                        aux=0;
                        for(j=0;j&lt;array_length_1d(global.numeros);j++){
                            if(global.numero[i]==global.numeros[j]){
                                aux=1;
                                break;
                            }
                        }
                        if(aux==0){
                            arrayFake[ii]=global.numero[i];
                            ii++;
                        }
                    }
                    var largo = array_length_1d(arrayFake)-1;
                    var indice = choose(floor(random_range(0,largo)));
                    global.a = arrayFake[indice];
                    global.numeros[global.contadorcito]=global.a;
                    global.contadorcito++;
                    
                    var aux=0;
                    var ii=0;
                    var arrayFake;
                    for(i=0;i&lt;array_length_1d(global.numero);i++){
                        aux=0;
                        for(j=0;j&lt;array_length_1d(global.numeros);j++){
                            if(global.numero[i]==global.numeros[j]){
                                aux=1;
                                break;
                            }
                        }
                        if(aux==0){
                            arrayFake[ii]=global.numero[i];
                            ii++;
                        }
                    }
                    var largo = array_length_1d(arrayFake)-1;
                    var indice = choose(floor(random_range(0,largo)));
                    global.b = arrayFake[indice];
                    global.numeros[global.contadorcito]=global.b;
                    global.contadorcito++;
                    global.r = global.a*global.b;
                }
            }
            if(global.dificultad&gt;=0){
            
                if(global.waveUltraFake==1){
                    for(i=0;i&lt;array_length_1d(global.numeros);i++){
                        global.numeros[i]=0;
                    }
                    global.b = choose(floor(random_range(global.minA,global.maxB)));
                    global.numeros[0]=global.b;
                    global.contadorcito = 1;
                }
                if(global.waveUltraFake&gt;1){
                    var aux=0;
                    var ii=0;
                    var arrayFake;
                    for(i=0;i&lt;array_length_1d(global.numero);i++){
                        aux=0;
                        for(j=0;j&lt;array_length_1d(global.numeros);j++){
                            if(global.numero[i]==global.numeros[j]){
                                aux=1;
                                break;
                            }
                        }
                        if(aux==0){
                            arrayFake[ii]=global.numero[i];
                            ii++;
                        }
                    }
                    var largo = array_length_1d(arrayFake)-1;
                    var indice = choose(floor(random_range(0,largo)));
                    global.b = arrayFake[indice];
                    global.numeros[global.contadorcito]=global.b;
                    global.contadorcito++;
                    
                }
                if(global.eFacil[global.dificultad]&gt;0){
                    global.origen = "facil";
                    global.a=global.faciles[0];
                    var numa=global.faciles[0];
                    for(x= 0; x&lt;array_length_1d(global.faciles)-1; x++){
                        global.faciles[x] = global.faciles[x+1];
                    }
                    global.faciles[array_length_1d(global.faciles)-1]= numa; 
                    global.eFacil[global.dificultad]--;
                }
                else{
                    if(global.eMedio[global.dificultad]&gt;0){
                        global.origen = "medio";
                        global.a=global.medios[0];
                        var numa=global.medios[0];
                        for(x= 0; x&lt;array_length_1d(global.medios)-1; x++){
                            global.medios[x] = global.medios[x+1];
                        }
                        global.medios[array_length_1d(global.medios)-1]= numa; 
                        global.eMedio[global.dificultad]--;
                    }
                    else{
                        if(global.eDificil[global.dificultad]&gt;0){
                            global.origen = "dificil";
                            global.a=global.dificiles[0];
                            var numa=global.dificiles[0];
                            for(x= 0; x&lt;array_length_1d(global.dificiles)-1; x++){
                                global.dificiles[x] = global.dificiles[x+1];
                            }
                            global.dificiles[array_length_1d(global.dificiles)-1]= numa; 
                            global.eDificil[global.dificultad]--;
                        }
                    }
                }
                global.r=global.a*global.b;
                
            
            }
        }
        if(global.modo==3) {
            global.a = choose(floor(random_range(2,12)));
            global.b = choose(floor(random_range(2,global.a)));
            global.r = global.a/global.b;
        }
        global.cont = 0;
        global.ccont=0;
        
        
        if(global.estado == "correcta")
            wave_generator_timer = 1.5; 
            /* Se esperan 1,5 segundos para visualizar feedback de felicitaciones
             y generar nuevas libélulas */
        else
            wave_generator_timer = 2; 
            /* Se esperan 2 segundos para visualizar feedback de correción
             y generar nuevas libélulas */

        if(ultimoEjercicio == 4)
            wave_generator_timer = 3;
            /* Se esperan 4 segundos para visualizar la fracción completa
             y generar un nuevo ejercicio (mariposa) más nuevas libélulas */
             
        if(global.dificultad &gt;= 0){       
            if(!global.ejercicioTerminado)
                global.suma_correcta = global.ar + global.br;
        }
            /* Guardo el valor de la suma que corresponde al resultado correcto
            en el numerador, para que si cambia por la alarma y generación de nuevo ejercicio,
            se siga mostrando hasta que termine el timer tras finalizar una mariposa */
            
            
        alarm[0] = room_speed*wave_generator_timer;
        global.intentos = 0; /*CUANDO YA PASARON TODOS LOS ASTEROIDES (RONDA TERMINADA
                                EL CONTADOR DE INTENTOS SE RESETEA*/
        global.numEjercicio++;
        global.respondida = false;
        global.tiempoUltimaRespuesta = 0;
        global.aparicionCorrecta = 0;
        global.segundos = 0;
        global.estado = "omitida";
        global.spawner_enabled = true;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
